Metadata-Version: 2.4
Name: maowise
Version: 0.1.0
Summary: Micro-Arc Oxidation Thermal-Control Coating Optimizer
Author-email: MAO-Wise Team <maowise@example.com>
License: MIT
Project-URL: Homepage, https://github.com/your-org/mao-wise
Project-URL: Documentation, https://github.com/your-org/mao-wise#readme
Project-URL: Repository, https://github.com/your-org/mao-wise.git
Project-URL: Bug Tracker, https://github.com/your-org/mao-wise/issues
Keywords: materials,coating,optimization,machine-learning
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Science/Research
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Topic :: Scientific/Engineering :: Chemistry
Classifier: Topic :: Scientific/Engineering :: Materials Science
Requires-Python: >=3.9
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: fastapi>=0.68.0
Requires-Dist: uvicorn[standard]>=0.15.0
Requires-Dist: streamlit>=1.28.0
Requires-Dist: pydantic>=1.8.0
Requires-Dist: requests>=2.25.0
Requires-Dist: pyyaml>=5.4.0
Requires-Dist: pandas>=1.3.0
Requires-Dist: numpy>=1.21.0
Requires-Dist: scikit-learn>=1.0.0
Requires-Dist: sentence-transformers>=2.0.0
Requires-Dist: faiss-cpu>=1.7.0
Requires-Dist: loguru>=0.5.0
Requires-Dist: pymupdf>=1.18.0
Requires-Dist: camelot-py[cv]>=0.10.0
Requires-Dist: tabula-py>=2.2.0
Requires-Dist: pdfminer.six>=20211012
Requires-Dist: pytesseract>=0.3.8
Requires-Dist: torch>=1.9.0
Requires-Dist: botorch>=0.6.0
Requires-Dist: pymoo>=0.6.0
Requires-Dist: mlflow>=1.20.0
Requires-Dist: spacy>=3.4.0
Requires-Dist: chromadb>=0.3.0
Requires-Dist: dvc[s3]>=2.30.0
Requires-Dist: pyarrow>=5.0.0
Requires-Dist: openai>=1.0.0
Provides-Extra: dev
Requires-Dist: pytest>=6.0; extra == "dev"
Requires-Dist: pytest-cov>=2.12; extra == "dev"
Requires-Dist: black>=21.0; extra == "dev"
Requires-Dist: ruff>=0.0.200; extra == "dev"
Requires-Dist: isort>=5.9; extra == "dev"
Requires-Dist: pre-commit>=2.15; extra == "dev"
Provides-Extra: test
Requires-Dist: pytest>=6.0; extra == "test"
Requires-Dist: pytest-cov>=2.12; extra == "test"
Requires-Dist: httpx>=0.24.0; extra == "test"
Requires-Dist: selenium>=4.0.0; extra == "test"
Requires-Dist: webdriver-manager>=3.8.0; extra == "test"
Provides-Extra: all
Requires-Dist: maowise[dev,test]; extra == "all"
Dynamic: license-file

# MAO-Wise 1.0 (Micro-Arc Oxidation Thermal-Control Coating Optimizer)

![ci](https://github.com/Planckyo/mao-wise/actions/workflows/ci.yml/badge.svg)
![kb-smoke](https://github.com/Planckyo/mao-wise/actions/workflows/kb-smoke.yml/badge.svg)

MAO-Wise æ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯çš„å¾®å¼§æ°§åŒ–å·¥è‰ºçŸ¥è¯†ä¸ä¼˜åŒ–ç³»ç»Ÿï¼ŒåŒ…å«ï¼š
- PDF â†’ ç»“æ„åŒ–æ ·æœ¬æŠ½å–ï¼ˆå¯è¿½æº¯ï¼‰
- å‘é‡çŸ¥è¯†åº“ï¼ˆFAISS/NumPy å¤‡é€‰ï¼‰
- æ­£å‘é¢„æµ‹ï¼ˆæ–‡æœ¬â†’Î±/Îµï¼‰
- åå‘ä¼˜åŒ–ï¼ˆç›®æ ‡â†’å¯æ‰§è¡Œå¤šæ–¹æ¡ˆï¼‰
- FastAPI æœåŠ¡ä¸ Streamlit UI
- æ•°æ®/æ¨¡å‹ç‰ˆæœ¬åŒ–ä¸åŸºç¡€ MLOpsï¼ˆDVC/MLflowï¼‰

## ç›®å½•ç»“æ„

```
mao-wise/
â”œâ”€ apps/
â”‚  â”œâ”€ api/                  # FastAPI æœåŠ¡
â”‚  â””â”€ ui/                   # Streamlit å‰ç«¯
â”œâ”€ maowise/
â”‚  â”œâ”€ config/               # é…ç½®ä¸schema
â”‚  â”œâ”€ dataflow/             # æ¨¡å—ä¸€ï¼šPDFæŠ½å–â†’ç»“æ„åŒ–
â”‚  â”œâ”€ kb/                   # æ¨¡å—å››ï¼šå‘é‡åº“
â”‚  â”œâ”€ models/               # æ¨¡å—äºŒï¼šæ­£å‘æ¨¡å‹
â”‚  â”œâ”€ optimize/             # æ¨¡å—ä¸‰ï¼šåå‘ä¼˜åŒ–
â”‚  â”œâ”€ utils/                # å…¬å…±å·¥å…·ã€æ—¥å¿—ã€æ ¡éªŒ
â”‚  â””â”€ api_schemas/          # Pydanticè¯·æ±‚/å“åº”æ¨¡å‹
â”œâ”€ datasets/                # æœ¬åœ°æ•°æ®åŒºï¼ˆgitignoreï¼‰
â”‚  â”œâ”€ data_raw/             # PDF/åŸå§‹æ•°æ®
â”‚  â”œâ”€ data_parsed/          # è§£æä¸­é—´ä»¶
â”‚  â”œâ”€ index_store/          # å‘é‡ç´¢å¼•/é€šé“
â”‚  â””â”€ versions/             # ç»“æ„åŒ–æ ·æœ¬&å‘å¸ƒæ•°æ®é›†
â”œâ”€ models_ckpt/             # è®­ç»ƒåçš„æ¨¡å‹æƒé‡ï¼ˆgitignoreï¼‰
â”œâ”€ scripts/                 # è®­ç»ƒ/è¯„æµ‹/æ„å»ºè„šæœ¬
â”œâ”€ tests/                   # å•å…ƒä¸ç«¯åˆ°ç«¯æµ‹è¯•
â”œâ”€ requirements.txt
â”œâ”€ .env.example
â”œâ”€ README.md
â””â”€ LICENSE
```

## ğŸ§ª ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆE2Eï¼‰

### ä¸€é”®æµ‹è¯•éªŒæ”¶

MAO-Wise æä¾›å®Œæ•´çš„ç«¯åˆ°ç«¯æµ‹è¯•ç³»ç»Ÿï¼Œè‡ªåŠ¨éªŒè¯æ‰€æœ‰å…³é”®åŠŸèƒ½ï¼š

**Windows ä¸€é”®è¿è¡Œ**ï¼š
```powershell
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
.\scripts\run_e2e.ps1
```

**Linux/macOS æ‰‹åŠ¨è¿è¡Œ**ï¼š
```bash
# æ•°æ®å‡†å¤‡
python scripts/e2e_data_prep.py

# æ‰§è¡Œæµ‹è¯•
python scripts/e2e_validate.py
```

### æµ‹è¯•è¦†ç›–èŒƒå›´

- âœ… **APIæœåŠ¡å¯åŠ¨**ï¼šè‡ªåŠ¨å¯åŠ¨å¹¶æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€
- âœ… **é¢„æµ‹æ¾„æ¸…æµç¨‹**ï¼šæµ‹è¯•ç¼ºå¤±å‚æ•°æ—¶çš„ä¸“å®¶å’¨è¯¢æœºåˆ¶
- âœ… **å¿…ç­”é—®é¢˜ç³»ç»Ÿ**ï¼šéªŒè¯å¿…ç­”æ¸…å•å’Œæ™ºèƒ½è¿½é—®åŠŸèƒ½
- âœ… **è§„åˆ™ä¿®å¤å¼•æ“**ï¼šæµ‹è¯•è¿è§„å‚æ•°çš„è‡ªåŠ¨ä¿®å¤
- âœ… **RAGè§£é‡Šç³»ç»Ÿ**ï¼šéªŒè¯å¼•ç”¨ç”Ÿæˆå’Œè§£é‡Šè´¨é‡
- âœ… **æ²»ç†ä¸ç¼“å­˜**ï¼šæµ‹è¯•é€Ÿç‡é™åˆ¶ã€æˆæœ¬æ§åˆ¶å’Œç¼“å­˜å‘½ä¸­

### æµ‹è¯•æŠ¥å‘Š

æµ‹è¯•å®Œæˆåè‡ªåŠ¨ç”Ÿæˆè¯¦ç»†æŠ¥å‘Šï¼š

- **MarkdownæŠ¥å‘Š**ï¼š`reports/e2e_report.md`
- **HTMLæŠ¥å‘Š**ï¼š`reports/e2e_report.html`

æŠ¥å‘ŠåŒ…å«ï¼š
- ğŸ“Š æµ‹è¯•é€šè¿‡ç‡å’Œè€—æ—¶ç»Ÿè®¡
- ğŸ“‹ æ¯ä¸ªæµ‹è¯•é¡¹çš„è¯¦ç»†ç»“æœ
- ğŸ”§ ç³»ç»Ÿé…ç½®å’Œè¿è¡Œæ¨¡å¼ä¿¡æ¯
- ğŸ’¡ å¤±è´¥é¡¹ç›®çš„ä¿®å¤å»ºè®®

### ç¯å¢ƒé…ç½®

**å¯é€‰ç¯å¢ƒå˜é‡**ï¼š
```powershell
# å¯ç”¨åœ¨çº¿LLMåŠŸèƒ½
$env:OPENAI_API_KEY = "sk-your-api-key"

# ä½¿ç”¨æœ¬åœ°æ–‡çŒ®åº“ï¼ˆæ”¯æŒä¸­æ–‡è·¯å¾„ï¼‰
$env:MAOWISE_LIBRARY_DIR = "D:\æ¡Œé¢\æœ¬åœ°PDFæ–‡çŒ®çŸ¥è¯†åº“"

# å¯ç”¨è¯¦ç»†è°ƒè¯•æ—¥å¿—
$env:DEBUG_LLM = "true"
```

**ç¦»çº¿å…œåº•æ¨¡å¼**ï¼š
- æ— éœ€APIå¯†é’¥å³å¯è¿è¡Œå®Œæ•´æµ‹è¯•
- è‡ªåŠ¨ä½¿ç”¨æœ€å°æ•°æ®å¤¹å…·è¿›è¡ŒåŠŸèƒ½éªŒè¯
- ç¡®ä¿æ ¸å¿ƒåŠŸèƒ½åœ¨ç¦»çº¿ç¯å¢ƒä¸‹æ­£å¸¸å·¥ä½œ

---

## å¿«é€Ÿå¼€å§‹ï¼ˆæœ¬åœ°å¼€å‘ï¼‰

1) å®‰è£…ä¾èµ–ï¼ˆWindows éœ€é¢å¤–å®‰è£… Tesseract OCR ä¸ Javaï¼ˆç”¨äº Tabulaï¼Œå¯é€‰ï¼‰ï¼‰

**æ–¹æ³•ä¸€ï¼šå¼€å‘åŒ…å®‰è£…ï¼ˆæ¨èï¼‰**
```bash
python -m venv .venv
.venv\Scripts\activate  # Windows
# source .venv/bin/activate  # Linux/Mac
pip install -e .
```

**æ–¹æ³•äºŒï¼šä¼ ç»Ÿä¾èµ–å®‰è£…**
```bash
python -m venv .venv
.venv\Scripts\activate
pip install -r requirements.txt
```

2) å‡†å¤‡æ•°æ®ï¼šå°† PDF æ”¾å…¥ `datasets/data_raw/`

3) æŠ½å– â†’ æ ·æœ¬

```
python -m maowise.dataflow.ingest --pdf_dir datasets/data_raw --out_dir datasets/versions/maowise_ds_v1
```

4) æ„å»ºçŸ¥è¯†åº“

```
python -m maowise.kb.build_index --corpus datasets/data_parsed/corpus.jsonl --out_dir datasets/index_store
```

5) è®­ç»ƒæ­£å‘æ¨¡å‹

```
python -m maowise.models.train_fwd --samples datasets/versions/maowise_ds_v1/samples.parquet \
  --model_name bert-base-multilingual-cased --out_dir models_ckpt/fwd_v1 --epochs 8 --lr 2e-5 --batch 16
```

6) å¯åŠ¨ API ä¸ UI

```
uvicorn apps.api.main:app --reload
streamlit run apps/ui/app.py
```

### å¿«é€Ÿå‘½ä»¤ï¼ˆå¼€å‘ï¼‰
- åˆå§‹åŒ–ä¾èµ–ä¸é’©å­ï¼š`make init`
- ä»£ç æ£€æŸ¥ï¼ˆæ ¼å¼åŒ–+lint+å•æµ‹ï¼‰ï¼š`make check`

### æœ¬åœ°åº“æ¥å…¥ï¼ˆWindows ä¸­æ–‡è·¯å¾„ï¼‰
```
chcp 65001 > $null
$env:MAOWISE_LIBRARY_DIR="D:\æ¡Œé¢\æœ¬åœ°PDFæ–‡çŒ®çŸ¥è¯†åº“"
powershell -ExecutionPolicy Bypass -File scripts\link_local_library.ps1 -UseOCR:$false -DoTrain:$false
# å¦‚éœ€ç«‹å³è®­ç»ƒï¼š
# powershell -ExecutionPolicy Bypass -File scripts\link_local_library.ps1 -UseOCR:$false -DoTrain:$true
```

## æœ¬åœ°ä¸€é”®è¿è¡Œï¼ˆWindows + ä¸­æ–‡è·¯å¾„ï¼‰

> éœ€è¦å®‰è£…ä¾èµ–ï¼š`pip install -r requirements.txt`ï¼›è‹¥ä½¿ç”¨ OCR/Tabulaï¼Œè¯·é¢å¤–å®‰è£… Tesseract/Javaã€‚

```powershell
# 1) å†™å…¥ .envï¼ˆå¯ä¿®æ”¹è·¯å¾„ï¼‰
powershell -ExecutionPolicy Bypass -File scripts\bootstrap_env.ps1 -LibraryDir "D:\æ¡Œé¢\æœ¬åœ°PDFæ–‡çŒ®çŸ¥è¯†åº“"

# 2) ä¸€é”®æ¥å…¥åº“ï¼ˆä¸è®­ç»ƒï¼‰
powershell -ExecutionPolicy Bypass -File scripts\pipeline_local.ps1 -UseOCR:$false -DoTrain:$false

# 3) ï¼ˆå¯é€‰ï¼‰å¼€å§‹è®­ç»ƒä¸è¯„æµ‹
powershell -ExecutionPolicy Bypass -File scripts\pipeline_local.ps1 -DoTrain:$true

# 4) å¯åŠ¨ API + UI å¹¶è‡ªæµ‹
powershell -ExecutionPolicy Bypass -File scripts\start_services.ps1

# 5) éœ€è¦æ—¶åœæ­¢æœåŠ¡
powershell -ExecutionPolicy Bypass -File scripts\stop_services.ps1
```

å¸¸è§äº§ç‰©ï¼š
- `manifests/manifest_{train,val,test}.csv`, `split_meta.json`
- `datasets/versions/maowise_ds_v1/samples.parquet`ï¼ˆå¸¦ splitï¼‰
- `datasets/data_parsed/corpus.jsonl`ï¼Œ`datasets/index_store/`
- è®­ç»ƒäº§ç‰©ï¼š`models_ckpt/fwd_v1/`ï¼ŒæŠ¥å‘Šåœ¨ `reports/`

### æ•°æ®ä¸ DVC æ²»ç†
- ä¸è¦å°†å¤§æ–‡ä»¶ï¼ˆPDF/æ¨¡å‹æƒé‡/ç´¢å¼•ï¼‰ç›´æ¥æäº¤åˆ° Gitã€‚
- ä½¿ç”¨ DVC è¿½è¸ªæ•°æ®ä¸ç´¢å¼•ï¼ˆè¿œç«¯åœ°å€é€šè¿‡ `DVC_REMOTE_URL` é…ç½®ï¼‰ã€‚

## API ç«¯ç‚¹
- POST `/api/maowise/v1/ingest`
- POST `/api/maowise/v1/predict`
- POST `/api/maowise/v1/recommend`
- POST `/api/maowise/v1/kb/search`

## å¤‡æ³¨
- é¦–ç‰ˆä¼˜å…ˆæ‰“é€šç«¯åˆ°ç«¯æœ€å°å¯ç”¨è·¯å¾„ï¼›ç²¾åº¦ä¸é²æ£’æ€§éšæ•°æ®è¿­ä»£ã€‚
- ç½®ä¿¡åº¦æ¥æºäºç›¸ä¼¼æ¡ˆä¾‹çš„ç›¸ä¼¼åº¦ï¼Œä»…ä¾›æ’åºä¸æç¤ºã€‚
- DVC/MLflow é’©å­å°±ç»ªï¼Œå¯æŒ‰éœ€å¯ç”¨ã€‚

